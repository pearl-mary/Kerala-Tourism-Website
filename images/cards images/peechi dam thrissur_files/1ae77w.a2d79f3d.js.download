(this.$WP=this.$WP||[]).push(["1ae77w",(e,t)=>{"use strict";var l,a,r,n,o,i,d,s,u,c,m,C,I,p,E,b,y,g,f,L,A,v,h,R,_,S,M,w,T,N,O,P,k,V,W,x,D,G,U,B,F,Y,q="ythoN w G5",H=20,K=e=>{var t,l,K,Q,z,j,$,J,X,{albumId:Z,referenceMediaId:ee,categoryId:te,typeId:le,mediaId:ae,locationId:re,locationName:ne,secondaryTitleContent:oe,actionHandler:ie,offer:de,adSlot:se,businessContact:ue,skipQuickAlbums:ce,disableControls:me,getShareUrlForMedia:Ce,galleryRendererOverride:Ie,fullscreenRendererOverride:pe,sort:Ee,quickAlbumsConfiguration:be,queryClientOverride:ye,heroDataStrategyOverride:ge,pageDataStrategyOverride:fe,trackingCallback:Le}=e,{localize:Ae}=O(),ve=L(),he=ye||"mv",Re=ge||"mvh",_e=fe||("RECENCY"===Ee?"mr":"m"),Se=be||"mvqa",Me=p(Z),we={locationId:re,albumId:Z===E.PANO_ALBUM?E.ALL_ALBUMS:Z,client:he,dataStrategy:Re,filter:b(le),subAlbumId:Z===E.PANO_ALBUM?E.PANO_ALBUM:te,referenceMediaId:ee},[Te]=d({query:s,variables:we}),{fetching:Ne,data:Oe,error:Pe}=Te,ke=null==Oe||null==(t=Oe.mediaAlbum)?void 0:t.status,Ve=Ne?null:null==Oe||null==(l=Oe.mediaAlbum)?void 0:l.album;if(Pe){var We=Pe.message.replace(/Error #[0-9]+/g,"Error #xxx");console.error("[MASDesktopMediaViewer] albumQuery",We),Ve||ie({type:"ERROR",albumId:Z,statusCode:-1,errorMessage:Pe.message})}ke&&ke>=400&&ee&&(console.error(`[MASDesktopMediaViewer] albumQuery received status ${ke}`),ie({type:"ERROR",albumId:Z,statusCode:ke}));var xe=null==Ve||null==(K=Ve.mediaList)?void 0:K[0],De=(null==Ve?void 0:Ve.offset)||0,Ge=a((()=>({locationId:re,albumId:Z===E.PANO_ALBUM?E.ALL_ALBUMS:Z,subAlbumId:Z===E.PANO_ALBUM?E.PANO_ALBUM:te,client:he,dataStrategy:_e,filter:b(le),offset:0,limit:H})),[re,Z,te,he,_e,le]),[Ue,Be]=u({query:c,variables:Ge}),Fe=Object.keys(Ue).length,Ye=r((e=>{var t=Math.abs(Math.floor(e/H));return null!=Ue&&Ue[t]?null==Ue?void 0:Ue[String(t)]:(Be({offset:t*H,limit:H}),ie({type:"PAGED",pageNumber:t}),{fetching:!0,data:null})}),[Be,Ue,ie]),{fetching:qe}=Ue[0];n((()=>{qe||ve(A.GALLERY_VIEW_PHOTOS_SEEN,{photosSeen:Fe*H})}),[qe,Fe,ve]);var He=r((e=>{var t,l,a;if(e===De&&Ee!==y.RECENCY)return xe;var r=e,n=Ye(r);return null!=n&&n.fetching?null:null==n||null==(t=n.data)||null==(l=t.mediaAlbumPage)||null==(a=l.mediaList)?void 0:a[r%H]}),[Ye,xe,De,Ee]),Ke=r((e=>{var t=He(e);return t?{media:t,loading:!1}:{loading:!0}}),[He]),Qe=o({...f}),[ze,je]=i(!1),$e=e=>{je(e)},Je=r(((e,t)=>{var l=He(e);pe&&pe(l);var a=(null==Ve?void 0:Ve.totalMediaCount)||0;return l?B(h,{media:l,shareUrl:Ce?Ce(l):null,totalMediaInfo:{selectedIndex:e,totalCount:a},onSwipeRight:()=>{},onSwipeLeft:()=>{},innateTranslations:!1,businessContact:ue,onFullscreenMedia:$e,locationId:re,isActiveViewer:t,trackingCallback:Le}):null}),[He,pe,Ce,Ve,ue,re,Le]),Xe="grid",Ze=o(!1),et={locationId:re,client:he,filter:g(),configuration:Se},[tt]=d({query:m,variables:et,pause:!!ce}),{data:lt,fetching:at,error:rt}=tt;rt&&ie({type:"ERROR",albumId:Z,statusCode:-1,errorMessage:rt.message});var nt=null==lt||null==(Q=lt.mediaWindow)||null==(z=Q.windowPanes)||null==(j=z[0])?void 0:j.albums,ot=nt&&nt.map((e=>{var t,l;return{id:e.albumId,titleNode:B(N,{count:e.totalMediaCount,title:e.name}),thumbnailNode:B(v,{width:"100%",height:"100%",sources:(null==(t=e.mediaList)||null==(l=t[0])?void 0:l.photoSizes)||[]})}})),it=null==lt||null==($=lt.mediaWindow)||null==(J=$.windowPanes)||null==(X=J[0])?void 0:X.albums,dt={locationId:re,albumId:Z,client:he,filter:g(),configuration:Me},[st]=d({query:m,variables:dt,pause:!!me}),{data:ut,error:ct}=st;ct&&ie({type:"ERROR",albumId:Z,statusCode:-1,errorMessage:ct.message});var mt=r((e=>{ie({type:"SOURCE_CHANGE",typeId:e}),ve(A.GALLERY_VIEW_TYPE_CLICK,{typeId:e}),ve(A.SOURCE_FILTER_CLICK,{typeId:e})}),[ie,ve]),Ct=r((e=>{ie({type:"CATEGORY_CHANGE",categoryId:e}),ve(A.GALLERY_VIEW_CATEGORY_CLICK,{categoryId:e}),ve(A.ADVANCED_FILTER_CLICK,{categoryId:e})}),[ie,ve]),[It,pt]=i(96),Et=e=>{pt(e)},[bt,yt]=i(!1),gt=e=>{yt(e)},ft=r((e=>{ie({type:"SORT",sort:e}),ve(A.SORT_TYPE_CHANGE,{sort:e})}),[ie,ve]),Lt=r((()=>{var e,t;if(ut&&null!=(e=ut.mediaWindow)&&null!=(t=e.windowPanes[0])&&t.albums){var l,{albums:a}=ut.mediaWindow.windowPanes[0];if(Z===E.TRAVELER_ALBUM){var r=it&&it.find((e=>e.albumId===E.TRAVELER_ALBUM));l={mediaCounts:{TRAVELER:(null==r?void 0:r.totalMediaCount)||0}}}else l=a.find((e=>e.albumId===te));var n,o,i,d=l?l.mediaCounts:null;if(d)return B("div",{className:"rRjcL",children:B("div",{className:q,children:B(k,{onHeightChange:Et,filterExpand:bt,children:F("div",{className:"EKClu w Pp f k",children:[B("div",{className:"wWokE",children:F("div",{className:"BBFqV",children:[B(V,{selectedSourceId:le,sourceCounts:d,onSelect:mt}),B(W,{albums:null==ut||null==(n=ut.mediaWindow)||null==(o=n.windowPanes)||null==(i=o[0])?void 0:i.albums,selectedTypeId:le,onSelect:Ct,selectedFilterId:te,selectedAlbumId:Z,onExpandChange:gt})]})}),B("div",{children:B(x,{selectedSort:null!=Ee?Ee:y.ML,onSelect:ft})})]})},"MVControlsContainer")})})}return B("div",{className:q,children:B(k,{header:"",loading:!0,onHeightChange:Et,filterExpand:bt,children:B(D,{height:"100%"})})},"MVControlsContainer")}),[ut,te,le,Z,Ct,mt,it,bt,Ee,ft]),At=o(!ee);!At.current&&Qe.current.setSelectedIndex&&Ve&&(Ve.offset||0===Ve.offset)&&(Qe.current.setSelectedIndex(Ve.offset),At.current=!0);var vt=r((e=>{switch(e.type){case R.albumSelect:ie({type:"ALBUM",referenceCompoundMediaId:null,albumId:e.albumId}),ve(A.GALLERY_VIEW_ALBUM_CLICK,{albumId:e.albumId});break;case R.galleryItemClicked:ve(A.DETAIL_VIEW_GALLERY_CLICK,{tileDetails:{offset:e.offset,mode:e.mode},isMWRedesign:!0}),ve(A.GRID_VIEW_ITEM_CLICK),je(!1),ie({type:"GALLERY_CLICK",selectedIndex:e.selectedIndex,offset:e.offset,mode:e.mode,newMedia:Ke(e.selectedIndex)});break;case R.fullscreenNav:ie({type:"FULLSCREEN_NAV",newMedia:Ke(e.newIndex),newIndex:e.newIndex});break;case R.fullscreenClose:ve(A.DETAIL_VIEW_DISMISS,{mvDetailViewCloseType:"controls"===e.closeType?"album_change":e.closeType}),ve(A.VIEW_GALLERY_BUTTON_CLICK),ie({type:"FULLSCREEN_CLOSE",closeType:e.closeType});break;case R.scroll:!Ze.current&&e.position>0&&(ve(A.GALLERY_VIEW_SCROLL_ENGAGEMENT),Ze.current=!0),ie({type:"SCROLL",position:e.position});break;case R.close:ie({type:"CLOSE"})}}),[ie,Ke,Xe,ve]);n((()=>{Qe.current.backToTop(),Qe.current.closeDetail(),ve(A.GALLERY_VIEW,{isMWRedesign:!0}),Ze.current=!1}),[Z,le,te,ve]),n((()=>{ae||Qe.current.closeDetail()}),[ae]);var ht=()=>B(_,{layout:Xe}),Rt=S(he),_t=M(Se),St=M(Re),Mt=C(lt,rt),wt=I(Oe,Pe);return F(U,{errorRenderer:()=>F(Y,{children:[B(w,{client:Rt,approach:St,status:T.RenderError}),B(w,{client:Rt,approach:_t,status:T.RenderError}),B(w,{enabled:!Ne,client:Rt,approach:St,status:wt,decrement:!0}),B(w,{enabled:!at,client:Rt,approach:_t,status:Mt,decrement:!0})]}),children:[B(P,{close:()=>ie({type:"CLOSE"}),galleryRenderer:(e,t,l)=>{var a=He(e);return Ie?Ie(a,t,l):a?B(G,{media:a,width:t,height:l,locationId:re}):null},fullRenderer:Je,galleryOffsetTop:me?0:It-2,controlsRenderer:me?null:Lt,totalCount:(null==Ve?void 0:Ve.totalMediaCount)||0,quickAlbumsDefinition:ot,selectedAlbumId:Z,actionHandler:vt,onTileGalleryControls:e=>{Qe.current=e},disableFullscreenNavigation:ze,disableFullscreenClose:ze,titleText:ne&&Ae.string("PhotocC_ffffe1a6",{1:ne}),secondaryTitleContent:oe,secondaryHeaderContent:de,auxiliaryComponent:se?se():null,layoutStyle:Xe,detailCloseButton:B(ht,{}),useHero:!1,noHistoryManipulation:!0}),B(w,{enabled:!Ne,client:Rt,approach:St,status:wt}),B(w,{enabled:!at,client:Rt,approach:_t,status:Mt})]})};return[()=>{e("default",l(K))},[e=>(l=e.memo,a=e.useMemo,r=e.useCallback,n=e.useEffect,o=e.useRef,i=e.useState),e=>d=e.useQuery,e=>(s=e.albumQuery,u=e.usePaginatedQuery,c=e.albumPageQuery,m=e.quickAlbumsQuery,C=e.getPrimaryPhotoStatusForWindow,I=e.getPrimaryPhotoStatusForAlbum),e=>(p=e.getRHRFiltersWindowConfig,E=e.AlbumTypes,b=e.getFilter,y=e.mediaSortType,g=e.getMediaFilterToRetrieveAllPhotos),e=>f=e.DEFAULT_CONTROLS,e=>(L=e.useMVTracking,A=e.trackedPageActions),e=>v=e.ResponsiveImage,e=>h=e.MWDetailViewer,e=>R=e.mvActions,e=>_=e.GalleryButton,e=>(S=e.getClient,M=e.getApproach,w=e.PrimaryPhotoStatusCounter,T=e.Status),e=>N=e.StockTitle,e=>O=e.useLocalize,e=>P=e.DesktopViewer,e=>k=e.ControlsContainer,e=>(V=e.SourceFilterDropdown,W=e.AlbumPills,x=e.SortDropdown),e=>D=e.default,e=>G=e.default,e=>U=e.ErrorBoundary,e=>(B=e.jsx,F=e.jsxs,Y=e.Fragment)]]},["1o4yt4","1mqwhq","cboiod","13w1vr","d56uto","1eucgl","76j3t0","80p4m1","ykge6s","de5kvz","tsg6fc","wkhu77","17thqz","1p1duv","1ydm0z","nrft5x","u59av4","15yrpl","nbuwox","121h32"]]);
