(this.$WP=this.$WP||[]).push(["qm1ubp",(e,a)=>{"use strict";var s,t,i,o,n,r,c,l,u,d,p,g,f,_,m,k,h,v,b,w,E,N,O,y,x,C,P,F,B,D,L=({triggerNext:e,onPopupDismiss:a})=>{var t=r(),i=n(),o=l(),p="MOBILE"===c(),g=()=>{},f=e||g;return s((()=>{(u(i)||o)&&a&&a()}),[o,p,a,t,i]),u(i)||o?null:_(P,{triggerNext:f,servletName:t.page,onDismiss:()=>{a&&a(),d(i)},trackWouldOpenExplicitPreferences:g,openExplicitPreferences:g,explicitPreferencesEnabled:!1})},q=({localize:e,viewportCategory:a,onDismiss:o,triggerNext:n,openExplicitPreferences:r,trackWouldOpenExplicitPreferences:c,explicitPreferencesEnabled:l,recordEvent:u,domainName:d,appIntegrationConfig:p,login:g})=>{var[b,w]=t(!1),[N,O]=t(!1),[y,x]=t(!1),C=i((()=>{y||x(!0)}),[y,x]),P=i((()=>{C(),u("facebook_onetap_closed"),o()}),[C,u,o]),F=i((()=>{w(!0),window.FB.Event.subscribe("xfbml.render",(()=>{u("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?O(!0):(x(!0),n())}))}),[w,O,x,n,u]),B=i((()=>{var{sdkUrl:e,appId:a,apiVersion:s}=p;if(e&&a&&s){var t=()=>{},i=new Promise((e=>{t=e}));!function(e,a,s){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:a,status:!0,cookie:!0}),s()}}(a,s,t),i.then(F)}else n()}),[F,p,n]);s((()=>{if(y)n();else{u("facebook_onetap_requested");var{sdkUrl:e}=p;f(e||"","MEMX"),B()}}),[B,u,n,y,p]);var D=i((e=>{if(!e)return null;var a=e.split(".",2)[1];if(a){var s=atob(a);try{return JSON.parse(s)}catch(e){u("facebook_onetap_parseSignedRequestFailed")}}return null}),[u]),L=i((e=>{var a=D(e);a&&a.code&&(k.set("FacebookAuthCode2",a.code,{expires:new Date((new Date).getTime()+5e3),domain:d,path:"/"}),g({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{P()},onSuccess:e=>{e&&e.userId&&(C(),e.hasCreatedMember&&(c&&c(),l&&r&&r()))}}))}),[g,C,c,P,d,l,r,D]),q=i((()=>{u("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:a}=e;a&&a.accessToken&&L(a.signedRequest)}}))}),[u,L]);if(y||!b||!N)return null;var A={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout((()=>{window.FB.XFBML.parse()}),50),window.FB.Event.subscribe("auth.authResponseChange",(()=>{q()}));var T="MOBILE"===a;return m("div",{className:h("oZwqD D Gi B1 Z BB","RoZcR"),style:{bottom:T?"0px":"unset"},children:[_(E,{onClick:P}),m("div",{className:"QGCww w z",children:[_("div",{className:"dpfbx Ci b f u",children:_("div",{children:A.headline})}),_("p",{className:"fFBkN Mc Nb MA NC",children:A.subhead}),_("div",{className:"ZOVpo w",children:_("div",{className:"w",children:_("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}})})}),_("div",{className:"YMLar Ci",children:_(v,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}})})]})]})},A={__key:0xb7c064a1dc73,id:"b7c064a1dc739c643393c7082b231ce7",loc:{},definitions:[]},T=({triggerNext:e,onPopupDismiss:a})=>{var{page:t}=r(),o=p.includes(t),{trackWouldOpenExplicitPreferences:u}=N("ONBOARDING","FB_ONETAP"),g=i((()=>{o&&u()}),[u,o]),f=()=>{},m=()=>{var s=e||f;a&&a(),s()},{localize:k}=b(),h=x(),v=c(),E=O(),P=y(),F=i((e=>{P({module:"facebook_onetap",action:e,context:`${t||"unknown"}`})}),[t,P]),D=w(),L=n(),q=l(),[{data:T,fetching:z,error:I}]=C({query:A,variables:{locale:D},pause:!!q});return s((()=>{!I&&T&&T.Facebook_getFbConnectConfig||a&&a()}),[I,T,a]),z?null:!I&&T&&T.Facebook_getFbConnectConfig?_(B,{onDismiss:()=>{a&&a(),d(L)},triggerNext:m,trackWouldOpenExplicitPreferences:g,appIntegrationConfig:T.Facebook_getFbConnectConfig,localize:k,viewportCategory:v,recordEvent:F,domainName:E,login:h}):(m(),null)},z=()=>{var[e,a]=t(!1),[d,p]=t("GOOGLE_ONETAP"),g=n(),f=l(),{page:m,params:k}=r(),h="MOBILE"===c();s((()=>{u(g)||f?a(!0):e&&a(!1)}),[e,f,g,a,m,k,h]);var v=i((()=>{p("FACEBOOK_ONETAP")}),[p]),b=()=>null,w=b,E=[],N="registration_dialog";switch(d){case"GOOGLE_ONETAP":E=["google_one_tap"],w=({dismiss:e})=>_(F,{triggerNext:v,onPopupDismiss:()=>{e()}}),N="google_one_tap";break;case"FACEBOOK_ONETAP":E=["facebook_one_tap"],w=({dismiss:e})=>_(D,{onPopupDismiss:()=>{e()}}),N="facebook_one_tap"}return o({factory:b,eventTypes:[],key:"skip_marketing_interstitial",tier:50,skip:!0}),o({factory:b,eventTypes:[],key:"skip_date_picker",tier:100,skip:!0}),o({factory:w,eventTypes:E,key:e?`skip_${N}`:N,tier:200,skip:e}),null};return[()=>{P=g.onComponentUsage((()=>a("1j3bsm")),"default"),F=L,B=q,D=T,e("default",z)},[e=>(s=e.useEffect,t=e.useState,i=e.useCallback),e=>o=e.usePopupHierarchyRender,e=>n=e.useSessionId,e=>r=e.useRoute,e=>c=e.useViewportCategory,e=>l=e.useUserId,e=>(u=e.shouldSuppressRegistrationDialog,d=e.setRegDialogDismissed,p=e.HOTEL_SERVLETS),e=>(g=e,f=e.importScript),e=>(_=e.jsx,m=e.jsxs),e=>k=e.default,e=>h=e.default,e=>(v=e.UnsafeLocalize,b=e.useLocalize,w=e.useLocale),e=>E=e.CloseIcon,e=>N=e.default,e=>O=e.useDomainName,e=>y=e.useGARecorder,e=>x=e.default,e=>C=e.useQuery]]},["1o4yt4","1xo1is","1al4vi","fgwvq1","1ys6v1","52far5","cyrz7y","1q7wvk","121h32","5gpqhx","fkji80","17thqz","1uzmmz","dvdzap","qlcuu5","32pwc7","lchj5q","1mqwhq"]]);
